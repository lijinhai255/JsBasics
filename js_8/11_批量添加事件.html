<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	/*清除默认样式*/
	* {
		padding: 0;
		margin: 0;
	}
	div {
		width: 500px;
		overflow: hidden;
		border: 1px solid #000;
	}
	p {
		float: left;
		width: 100px;
		height: 100px;
		margin-right: 10px;
		background-color: lightblue;
	}

	</style>
	
</head>
<body>
	<div class="box" id="box">
		<p>0</p>
		<p>1</p>
		<p>2</p>
		<p>3</p>
	</div>
	<!-- <p></p> -->
	<script type="text/javascript">
	// 批量添加事件
	// 获取类数组对象
	var ps = document.getElementById("box").getElementsByTagName("p");
	console.log(ps);
	// i表示索引值
	// 出现问题
	// for(var i = 0 ; i < ps.length ; i ++) {
	// 	ps[i].onclick = function() {
	// 		console.log(i);
	// 	};
	// }
	



	// 解决IIFE
	// for(var i = 0 ; i < ps.length ; i ++) {
	// 	(function(a) {
	// 		ps[a].onclick = function() {
	// 			console.log(a);
	// 		}
	// 	})(i);
	// }




	//使用this解决
	// this触发事件的该对象，只能在函数内部使用
	// for(var i = 0 ; i < ps.length ; i ++) {
	// 	ps[i].onclick = function() {
	// 		// this具有和原对象一样的方法属性
	// 		console.log(this.innerHTML);
	// 	};
	// }



	// 真的解决
	for(var i = 0 ; i < ps.length ; i ++) {
		// 可以提前将索引值保存在属性中
		ps[i].index = i;
		ps[i].onclick = function() {
			// 闭包
			// console.log(i);
			console.log(this.index);
		}
	}











	
	</script>
</body>
</html>